/**
 * MvcUI JavaScript Gestion des Utilisateurs
 *
 * Application MvcUI
 *
 * @package    MvcUI
 * @author     Regis TEDONE
 * @email      syradev@proton.me
 * @copyright  Syradev 2023
 * @license    https://www.gnu.org/licenses/gpl-3.0.en.html  GNU General Public License
 * @version    1.5.0
 */
docReady(()=>{"use strict";var e=document,t=e.querySelector("#actionuser");
/** Constantes des sélecteurs */const r=e.querySelector("#userform");var l=e.querySelector("#deleteuser");const u=e.querySelector("#userdeleteform"),c=e.querySelector("#email"),n=e.querySelector("#password"),o=e.querySelector("#cryptedEmail"),a=e.querySelector("#cryptedPw");var i=e.querySelector("#active");
/** Récupère le jeton CSRF Token depuis sa balise meta */let s,y=(null!==e.querySelector('meta[name="csrf-token"]')&&(s=e.querySelector('meta[name="csrf-token"]').content)
/** Positionne le focus sur le 1er champ en erreur ou sur le premier champ */,e.querySelector("input.is-invalid:first-of-type"));null===y&&null===(y=e.querySelector('input[type="text"]:first-of-type'))
/** Evènement ajouter/modifier un utilisateur */||y.focus(),null!==t&&t.addEventListener("click",e=>{e.preventDefault(),0<c.value.trim().length&&(o.value=window.btoa(AesJson.encrypt(c.value,s))),0<n.value.trim().length?a.value=window.btoa(AesJson.encrypt(n.value,s)):a.value="",r.submit()})
/** Evènement activer/désactiver un compte */,null!==i&&i.addEventListener("click",e=>{e=e.currentTarget;e.nextElementSibling.innerHTML=e.checked?"Compte activ&eacute;":"Compte d&eacute;sactiv&eacute;"})
/** Evènement supprimer un utilisateur */,null!==l&&l.addEventListener("click",e=>{e.preventDefault(),u.submit()})});